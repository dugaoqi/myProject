<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			img{width: 100px;}
			em{display: block;width: 120px;line-height: 30px;color: #fff;background: dodgerblue;margin: 10px auto;text-align: center;border-radius: 6px;}
		</style>
	</head>
	<body>
		<h2>购物车<small><a href="list.html">去商品列表</a></small></h2>
		<table border="1" cellspacing="0" width="700" align="center">
			<thead>
				<tr>
					<th>图片</th>
					<th>名字</th>
					<th>价格</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody>
				<!--<tr>
					<td><img src=""/></td>
					<td>Data</td>
					<td>Data</td>
					<td><em>删除</em></td>
				</tr>-->
			</tbody>
		</table>
	</body>
	<script src="data/goods.js" type="text/javascript" charset="utf-8"></script>
	<script src="cookie.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
//		console.log(json)
		
		var otbody = document.querySelector("tbody")
		
		var str = document.cookie
		var arr = str.split("; ");
		
		for(var i=0;i<arr.length;i++){
			for(var j=0;j<json.length;j++){
				if(arr[i].split("=")[0] == json[j].goodsId){
					otbody.innerHTML += "<tr index='"+ json[j].goodsId +"'>"+
											"<td><img src='"+ json[j].src +"'/></td>"+
											"<td>"+ json[j].name +"</td>"+
											"<td>"+ json[j].price +"</td>"+
											"<td><em>删除</em></td>"+
										"</tr>"
				}
			}
		}
		
		otbody.onclick = function(eve){
			var e = eve || window.event;
			var target = e.target || e.srcElement;
			if(target.nodeName == "EM"){
				target.parentNode.parentNode.remove()
				var index = target.parentNode.parentNode.getAttribute("index")
				removeCookie(index)
			}
		}
		
	</script>
</html>
